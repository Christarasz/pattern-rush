<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Pattern Rush</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div id="app">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="container">
                <h1 class="game-title">‚ö° Pattern Rush</h1>
                
                <div class="instructions">
                    <p>üéØ Match all pattern pairs!</p>
                    <p>üí° Grey dots need colors</p>
                    <p>üéÆ Drag containers to match</p>
                    <p>‚è±Ô∏è Beat the clock!</p>
                    <p>‚ö†Ô∏è One mistake = Game Over!</p>
                </div>
                
                <button class="btn-large btn-primary" onclick="game.showLevelSelect()">
                    START GAME
                </button>
            </div>
        </div>

        <!-- Level Selection Screen -->
        <div id="level-screen" class="screen">
            <div class="container">
                <h2 class="screen-title">Choose Your Game</h2>
                
                <div class="level-selection-grid">
                    <button class="level-card" id="card-easy" onclick="game.selectLevel('easy')">
                        <div class="level-emoji">üòä</div>
                        <div class="level-name">EASY</div>
                        <div class="level-stats">8 Containers ‚Ä¢ 2:00</div>
                    </button>
                    
                    <button class="level-card" id="card-medium" onclick="game.selectLevel('medium')">
                        <div class="level-emoji">üòé</div>
                        <div class="level-name">MEDIUM</div>
                        <div class="level-stats">12 Containers ‚Ä¢ 1:30</div>
                    </button>
                    
                    <button class="level-card" id="card-hard" onclick="game.selectLevel('hard')">
                        <div class="level-emoji">üî•</div>
                        <div class="level-name">HARD</div>
                        <div class="level-stats">14 Containers ‚Ä¢ 1:00</div>
                    </button>
                    
                    <div class="level-card custom-card" id="card-custom">
                        <div class="level-emoji">‚öôÔ∏è</div>
                        <div class="level-name">CUSTOM</div>
                        <div class="custom-controls">
                            <select id="custom-containers" class="custom-select" onchange="game.updateCustomSelection()">
                                <option value="4">4 containers</option>
                                <option value="6">6 containers</option>
                                <option value="8" selected>8 containers</option>
                                <option value="10">10 containers</option>
                                <option value="12">12 containers</option>
                                <option value="14">14 containers</option>
                                <option value="16">16 containers</option>
                                <option value="18">18 containers</option>
                                <option value="20">20 containers</option>
                            </select>
                            <select id="custom-time" class="custom-select" onchange="game.updateCustomSelection()">
                                <option value="30">0:30</option>
                                <option value="45">0:45</option>
                                <option value="60" selected>1:00</option>
                                <option value="90">1:30</option>
                                <option value="120">2:00</option>
                                <option value="180">3:00</option>
                                <option value="240">4:00</option>
                                <option value="300">5:00</option>
                            </select>
                            <button class="custom-select-btn" onclick="game.selectLevel('custom')">SELECT</button>
                        </div>
                    </div>
                </div>
                
                <button class="btn-play btn-primary" id="play-btn" onclick="game.startSelectedGame()" disabled>
                    ‚ñ∂ PLAY
                </button>
                
                <button class="btn-medium btn-secondary" onclick="game.showWelcome()">
                    ‚Üê BACK
                </button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="header-left">
                    <span class="level-badge" id="current-level">Easy</span>
                    <div class="pairs-counter">
                        <span class="pairs-label">Pairs:</span>
                        <span class="pairs-number" id="pairs-count">4</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="mute-btn" id="mute-btn" onclick="game.toggleMute()" title="Toggle Sound">
                        üîä
                    </button>
                    <div class="timer" id="timer">
                        <span class="timer-icon">‚è±Ô∏è</span>
                        <span class="timer-value" id="timer-value">60</span>
                    </div>
                </div>
            </div>
            
            <!-- Free-flowing containers -->
            <div class="game-board" id="game-board">
                <!-- Tiles will be generated here -->
            </div>
            
            <div class="game-footer">
                <button class="btn-small btn-secondary" onclick="game.showLevelSelect()">
                    üìã MENU
                </button>
                <button class="btn-small btn-secondary" onclick="game.restartLevel()">
                    üîÑ RESTART
                </button>
            </div>
        </div>

        <!-- Game Over Modal -->
        <div id="game-over-modal" class="modal">
            <div class="modal-content modal-fail">
                <div class="modal-emoji">üò¢</div>
                <h2 class="modal-title">Wrong Match!</h2>
                <p class="modal-text">Try again!</p>
                <div class="modal-buttons">
                    <button class="btn-medium btn-primary" onclick="game.restartLevel()">
                        TRY AGAIN
                    </button>
                    <button class="btn-medium btn-secondary" onclick="game.showLevelSelect()">
                        CHANGE LEVEL
                    </button>
                </div>
            </div>
        </div>

        <!-- Time's Up Modal -->
        <div id="timeout-modal" class="modal">
            <div class="modal-content modal-fail">
                <div class="modal-emoji">‚è∞</div>
                <h2 class="modal-title">Time's Up!</h2>
                <p class="modal-text">Try to be faster!</p>
                <div class="modal-buttons">
                    <button class="btn-medium btn-primary" onclick="game.restartLevel()">
                        TRY AGAIN
                    </button>
                    <button class="btn-medium btn-secondary" onclick="game.showLevelSelect()">
                        CHANGE LEVEL
                    </button>
                </div>
            </div>
        </div>

        <!-- Victory Modal -->
        <div id="victory-modal" class="modal">
            <div class="modal-content modal-success">
                <div class="modal-emoji">üéâ</div>
                <h2 class="modal-title">You Win!</h2>
                <p class="modal-text" id="victory-time">Completed in 0:45!</p>
                <div class="modal-buttons">
                    <button class="btn-medium btn-primary" onclick="game.restartLevel()">
                        PLAY AGAIN
                    </button>
                    <button class="btn-medium btn-secondary" onclick="game.showLevelSelect()">
                        CHANGE LEVEL
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/tile-generator.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
